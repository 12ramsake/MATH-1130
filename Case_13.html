<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.53">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>13&nbsp; SQL – MATH 1130 Companion Manual</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Case_12.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Case_13.html"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">SQL</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">MATH 1130 Companion Manual</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Python basics</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data extraction and transformation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Transformation I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Transformation II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Interpretation of charts and graphs</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data cleaning/wrangling</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Hypothesis testing I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Hypothesis testing II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Natural language processing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Linear Regression I</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Linear Regression II</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Case_13.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">SQL</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#why-databases" id="toc-why-databases" class="nav-link active" data-scroll-target="#why-databases"><span class="header-section-number">13.1</span> Why databases?</a></li>
  <li><a href="#types-of-databases" id="toc-types-of-databases" class="nav-link" data-scroll-target="#types-of-databases"><span class="header-section-number">13.2</span> Types of databases</a>
  <ul class="collapse">
  <li><a href="#relational-databases" id="toc-relational-databases" class="nav-link" data-scroll-target="#relational-databases"><span class="header-section-number">13.2.1</span> Relational databases</a></li>
  <li><a href="#nosql-databases" id="toc-nosql-databases" class="nav-link" data-scroll-target="#nosql-databases"><span class="header-section-number">13.2.2</span> NoSQL databases</a></li>
  <li><a href="#when-to-pick-one-over-the-other" id="toc-when-to-pick-one-over-the-other" class="nav-link" data-scroll-target="#when-to-pick-one-over-the-other"><span class="header-section-number">13.2.3</span> When to pick one over the other</a></li>
  </ul></li>
  <li><a href="#what-is-this-sql-thing" id="toc-what-is-this-sql-thing" class="nav-link" data-scroll-target="#what-is-this-sql-thing"><span class="header-section-number">13.3</span> What is this “SQL” thing?</a></li>
  <li><a href="#select-statements" id="toc-select-statements" class="nav-link" data-scroll-target="#select-statements"><span class="header-section-number">13.4</span> SELECT statements</a></li>
  <li><a href="#order-by-statements" id="toc-order-by-statements" class="nav-link" data-scroll-target="#order-by-statements"><span class="header-section-number">13.5</span> ORDER BY statements</a></li>
  <li><a href="#as-statements" id="toc-as-statements" class="nav-link" data-scroll-target="#as-statements"><span class="header-section-number">13.6</span> AS statements</a></li>
  <li><a href="#distinct-statements" id="toc-distinct-statements" class="nav-link" data-scroll-target="#distinct-statements"><span class="header-section-number">13.7</span> DISTINCT statements</a></li>
  <li><a href="#like" id="toc-like" class="nav-link" data-scroll-target="#like"><span class="header-section-number">13.8</span> LIKE</a>
  <ul class="collapse">
  <li><a href="#basic-syntax" id="toc-basic-syntax" class="nav-link" data-scroll-target="#basic-syntax"><span class="header-section-number">13.8.1</span> Basic Syntax</a></li>
  <li><a href="#wildcards" id="toc-wildcards" class="nav-link" data-scroll-target="#wildcards"><span class="header-section-number">13.8.2</span> Wildcards</a></li>
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples"><span class="header-section-number">13.8.3</span> Examples</a></li>
  <li><a href="#case-sensitivity" id="toc-case-sensitivity" class="nav-link" data-scroll-target="#case-sensitivity"><span class="header-section-number">13.8.4</span> Case Sensitivity</a></li>
  <li><a href="#using-escape-clause" id="toc-using-escape-clause" class="nav-link" data-scroll-target="#using-escape-clause"><span class="header-section-number">13.8.5</span> Using ESCAPE Clause</a></li>
  </ul></li>
  <li><a href="#case-statements" id="toc-case-statements" class="nav-link" data-scroll-target="#case-statements"><span class="header-section-number">13.9</span> CASE statements</a>
  <ul class="collapse">
  <li><a href="#basic-syntax-1" id="toc-basic-syntax-1" class="nav-link" data-scroll-target="#basic-syntax-1"><span class="header-section-number">13.9.1</span> Basic Syntax</a></li>
  <li><a href="#example-usage" id="toc-example-usage" class="nav-link" data-scroll-target="#example-usage"><span class="header-section-number">13.9.2</span> Example Usage</a></li>
  <li><a href="#nested-case-statements" id="toc-nested-case-statements" class="nav-link" data-scroll-target="#nested-case-statements"><span class="header-section-number">13.9.3</span> Nested CASE Statements</a></li>
  <li><a href="#using-case-in-where-clause" id="toc-using-case-in-where-clause" class="nav-link" data-scroll-target="#using-case-in-where-clause"><span class="header-section-number">13.9.4</span> Using CASE in WHERE Clause</a></li>
  </ul></li>
  <li><a href="#join" id="toc-join" class="nav-link" data-scroll-target="#join"><span class="header-section-number">13.10</span> JOIN</a>
  <ul class="collapse">
  <li><a href="#types-of-joins" id="toc-types-of-joins" class="nav-link" data-scroll-target="#types-of-joins"><span class="header-section-number">13.10.1</span> Types of JOINs</a></li>
  <li><a href="#examples-1" id="toc-examples-1" class="nav-link" data-scroll-target="#examples-1"><span class="header-section-number">13.10.2</span> Examples</a></li>
  </ul></li>
  <li><a href="#aggregate-functions" id="toc-aggregate-functions" class="nav-link" data-scroll-target="#aggregate-functions"><span class="header-section-number">13.11</span> Aggregate functions</a>
  <ul class="collapse">
  <li><a href="#avg" id="toc-avg" class="nav-link" data-scroll-target="#avg"><span class="header-section-number">13.11.1</span> 1. <code>AVG()</code></a></li>
  <li><a href="#count" id="toc-count" class="nav-link" data-scroll-target="#count"><span class="header-section-number">13.11.2</span> 2. <code>COUNT()</code></a></li>
  <li><a href="#min" id="toc-min" class="nav-link" data-scroll-target="#min"><span class="header-section-number">13.11.3</span> 3. <code>MIN()</code></a></li>
  <li><a href="#max" id="toc-max" class="nav-link" data-scroll-target="#max"><span class="header-section-number">13.11.4</span> 4. <code>MAX()</code></a></li>
  <li><a href="#sum" id="toc-sum" class="nav-link" data-scroll-target="#sum"><span class="header-section-number">13.11.5</span> 5. <code>SUM()</code></a></li>
  </ul></li>
  <li><a href="#sql-statement-types" id="toc-sql-statement-types" class="nav-link" data-scroll-target="#sql-statement-types"><span class="header-section-number">13.12</span> SQL statement types</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">SQL</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="why-databases" class="level2" data-number="13.1">
<h2 data-number="13.1" class="anchored" data-anchor-id="why-databases"><span class="header-section-number">13.1</span> Why databases?</h2>
<p>While we have been dealing with data sitting in CSV files so far, no serious data organization runs their operations off of CSV files on a single person’s computer. This practice presents all sorts of hazards, including but not limited to:</p>
<ol type="1">
<li>Destruction of that single device</li>
<li>Destruction of the files on that device</li>
<li>Inability to connect to that person’s device from another device that requires the data</li>
<li>Inability to store more than a limited amount of data (since a single device doesn’t have that much memory)</li>
</ol>
<p>Therefore, our data should be stored elsewhere if we want to reliably access it in the future and, more importantly, share it and work on it with others. The <strong>database</strong> is the classic location where modern organizations have chosen to store their data for professional use. Databases have been a topic of research since the late 1960s. Many technology vendors picked up on this and developed databases software for companies to consume. Some of these vendors and products are:</p>
<ol type="1">
<li>Microsoft, initially with Microsoft Access and more recently with Microsoft SQL Server</li>
<li>Oracle, with their Oracle database and MySQL (a popular open source database)</li>
<li>The “PostgreSQL Global Development Group”, with the open-source PostgreSQL</li>
</ol>
<p>These databases all implement the standard SQL language and are thus fairly similar to each other in terms of features. However, there are some key differences. Comparing <code>MySQL</code> vs.&nbsp;<code>PostgreSQL</code>, the two most popular database systems, MySQL does not implement <code>FULL JOINS</code> (you will learn about <code>JOIN</code>s later on). PostgreSQL also supports some more advanced aggregation functions for statistics (you will learn about these soon). For example, in PostgreSQL you can perform regressions directly on the data before retrieving it, whereas MySQL only supports basic stats operations. However, this overhead leads to a slight performance hit, making MySQL faster for simple retrieval tasks.</p>
</section>
<section id="types-of-databases" class="level2" data-number="13.2">
<h2 data-number="13.2" class="anchored" data-anchor-id="types-of-databases"><span class="header-section-number">13.2</span> Types of databases</h2>
<p>At this point, you might believe that databases can be thought of as a collection of data. This is true, but unfortunately it is not that simple. Data cannot simply be thrown in a database the same way you throw your socks in your sock drawer. Depending on your needs for the data, you will choose between one of two main types of databases.</p>
<section id="relational-databases" class="level3" data-number="13.2.1">
<h3 data-number="13.2.1" class="anchored" data-anchor-id="relational-databases"><span class="header-section-number">13.2.1</span> Relational databases</h3>
<p>The most common database type is called a <strong>relational database</strong>, and the systems that manage these kinds of databases are called <strong>Relational Database Management Systems (RDBMS)</strong>. Relational databases date back to the early 1970s and can be considered the first type of database ever conceived. Continuing with our sock example, this drawer would have many identical slots, each for one pair of socks. The socks may be of different materials, colors, brands, etc., but they need to fit into a slot.</p>
<p>Relational databases deal with “relational data”, which is a fancy way of saying “tabular” data. This kind of dataset consists of rows and columns (i.e.&nbsp;tables) where each row corresponds to an observation and each column corresponds to an attribute of that observation. For example if we were keeping track of our friends and their phone numbers, each row on the file (or table) represents one friend and each column represents the information we want to track about that friend (name and phone number). The cell on the intersection of the row and column contains the actual data. Relational data is manipulated using a specific language called <strong>SQL (Structured Query Language)</strong>, which we will learn about soon.</p>
<p>A simple way to conceptualize a table inside a relational database is as a CSV file “copied” to the database. In fact, many databases offer that possibility (assuming your file is correctly formatted, of course).</p>
</section>
<section id="nosql-databases" class="level3" data-number="13.2.2">
<h3 data-number="13.2.2" class="anchored" data-anchor-id="nosql-databases"><span class="header-section-number">13.2.2</span> NoSQL databases</h3>
<p>Around 20 years ago, with the advent of the Internet and the necessity to store and process unstructured data (i.e.&nbsp;data that does not fit well in the row-by-column paradigm), developers started to discuss another type of database, which eventually ended up being referred to as a <strong>NoSQL database</strong>. These databases are not relational and are also built with more “relaxed” rules compared to their predecessors. NoSQL databases are more like a big drawer without slots and not exclusively for socks. You may choose to use this drawer primarily for socks of all sizes - small ones, big ones, maybe even a loose sock by itself - but it could also contain other items like sweaters or pants.</p>
<p>As the name implies, NoSQL databases do not rely on SQL, although many of them do allow you to use SQL to interface with them. At its core, a NoSQL database is simply a key-value store. That is, everything you store (sometimes called a <strong>document</strong>) in this database has a key associated with it. The database’s job is simply to help you retrieve your desired document as quickly as possible. Nothing pre-determines what a document contains (i.e.&nbsp;it does not have a concept of “tables”); however, this flexibility comes at a price. When you retrieve a document, you have to perform extra checks on it to ensure its validity as the database will not automatically do this for you as it would with a relational database. This may or may not be desireable depending on your particular application.</p>
</section>
<section id="when-to-pick-one-over-the-other" class="level3" data-number="13.2.3">
<h3 data-number="13.2.3" class="anchored" data-anchor-id="when-to-pick-one-over-the-other"><span class="header-section-number">13.2.3</span> When to pick one over the other</h3>
<p>Picking between RDBMS vs.&nbsp;NoSQL really comes down to the requirements of your project. We touched on this above, but both systems prioritize different parts of the <a href="https://en.wikipedia.org/wiki/CAP_theorem"><strong>CAP Theorem</strong></a>. Simply put, the CAP Theorem says that a database system can’t have all three of the following:</p>
<ul>
<li><strong>Consistency</strong>: Every read of the database will return the most up-to-date write version or an error</li>
<li><strong>Availability</strong>: Every request receives a (non-error) response, without the guarantee that it contains the most up-to-date write version</li>
<li><strong>Partition Tolerance</strong>: The system continues to operate no matter the network quality between nodes</li>
</ul>
<p>NoSQL prefers to be partition tolerant over consistent, whereas, RDBMS is the opposite. In certain applications, consistency is imperative, which often forces you into using RDBMS. For example, if you are a bank and you query a customer’s balance, you want to guarantee that the number you get is the most recent one and not the one from yesterday.</p>
<p>For the remainder of the case, we shall only consider RDBMS systems.</p>
</section>
</section>
<section id="what-is-this-sql-thing" class="level2" data-number="13.3">
<h2 data-number="13.3" class="anchored" data-anchor-id="what-is-this-sql-thing"><span class="header-section-number">13.3</span> What is this “SQL” thing?</h2>
<p>So we’ve been dropping in references to SQL throughout, yet we haven’t explained what it is. Now we will! Just like data can’t really survive without a database, a database can’t be utilized without SQL. SQL is used for a wide variety of tasks, including but not limited to extracting data, creating the internal structure of a database (in the form of tables), and reading and writing data to these tables. SQL is an international standard published by the <a href="https://www.iso.org/standard/63555.html">ISO</a> and so it is the de facto language that all database systems adhere to.</p>
<p>In this course, we will be writing SQL queries using the <a href="https://www.sqlalchemy.org/"><code>SQLAlchemy</code></a> package in Python. This allows you to directly interface with relational databases without exiting the Python environment, while using syntax that is identical to what you would write outside of Python.</p>
<p>Run the code below to set up this framework:</p>
<div id="e75b2ecb" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sqlalchemy <span class="im">import</span> create_engine, text</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#maximum number of rows to display</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>pd.options.display.max_rows <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>engine<span class="op">=</span>create_engine(<span class="st">'sqlite://'</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'customer.csv'</span>).to_sql(<span class="st">'customer'</span>, engine, if_exists<span class="op">=</span><span class="st">'replace'</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'agent.csv'</span>).to_sql(<span class="st">'agent'</span>, engine, if_exists<span class="op">=</span><span class="st">'replace'</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.read_csv(<span class="st">'call.csv'</span>).to_sql(<span class="st">'call'</span>, engine, if_exists<span class="op">=</span><span class="st">'replace'</span>, index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># function that allows us to run queries</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> runQuery(sql):</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> engine.<span class="ex">connect</span>().execute((text(sql)))</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="co"># print(type(result))</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(result.fetchall(), columns<span class="op">=</span>result.keys())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="select-statements" class="level2" data-number="13.4">
<h2 data-number="13.4" class="anchored" data-anchor-id="select-statements"><span class="header-section-number">13.4</span> SELECT statements</h2>
<p>The most important thing you will ever do in SQL is extract a subset of the data from a SQL table based on a set of rules. This is accomplished using the <strong><code>SELECT</code></strong> statement and the following syntax:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">list</span> <span class="kw">of</span> <span class="kw">columns</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> which dataframe?</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> clause</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To translate the above diagram into words:</p>
<ol type="1">
<li>Start with the keyword <code>SELECT</code></li>
<li>Follow with the names of the columns you want to select, separated by commas (alternatively, you can use the <code>*</code> symbol to indicate you wish to select all columns)</li>
<li>Follow with the keyword <code>FROM</code></li>
<li>Finish with the name of the table you wish to select data from</li>
<li>Optionally, you can use the <code>WHERE</code> clause to only return results which satisfy certain conditions (similar to how code within Python <code>if...then</code> blocks only execute if the associated conditions are true)</li>
</ol>
<p>Example:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> CustomerID, Name</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> Customer</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> Occupation <span class="op">!=</span> <span class="st">'Unemployed'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Running in python:</p>
<div id="dc1b5c00" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>query1 <span class="op">=</span> <span class="st">"""SELECT CustomerID, Name</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="st">FROM Customer</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="st">WHERE Occupation != 'Unemployed'"""</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>runQuery(query1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">CustomerID</th>
<th data-quarto-table-cell-role="th">Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>Michael Gonzalez</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2</td>
<td>Amanda Wilson</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>3</td>
<td>Robert Thomas</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>4</td>
<td>Eddie Hall</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>6</td>
<td>Maria Johnson</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">755</td>
<td>994</td>
<td>Ruben Steele</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">756</td>
<td>995</td>
<td>Ashley Young</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">757</td>
<td>996</td>
<td>Mr. Steven Smith</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">758</td>
<td>997</td>
<td>Mark Smith</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">759</td>
<td>999</td>
<td>Karen Barber</td>
</tr>
</tbody>
</table>

<p>760 rows × 2 columns</p>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>We can define a multiline string in Python using triple quotes: <code>""" my_multiline string """</code>. This is used to write out the queries in this course. The triple quotes are not needed in regular SQL.</p>
</div>
</div>
</section>
<section id="order-by-statements" class="level2" data-number="13.5">
<h2 data-number="13.5" class="anchored" data-anchor-id="order-by-statements"><span class="header-section-number">13.5</span> ORDER BY statements</h2>
<p>SQL allows us to have the returned data ordered, using the <code>ORDER BY</code> statement. The statement <code>ORDER BY</code> should be followed by a comma-separated list of columns on which you want to order your results (columns that come first take priority in the subsequent ordering). Optionally, you can then append the keyword <code>ASC</code> or <code>DESC</code> (short for ascending and descending, respectively) after each column to determine the ordering type (e.g.&nbsp;alphabetical or reverse-alphabetical for a string column).</p>
<p>Example:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> CustomerID</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> Customer</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> Occupation <span class="op">!=</span> <span class="st">'Unemployed'</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> Name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> CustomerID</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> Customer</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> Occupation <span class="op">!=</span> <span class="st">'Unemployed'</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> Name <span class="kw">ASC</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="as-statements" class="level2" data-number="13.6">
<h2 data-number="13.6" class="anchored" data-anchor-id="as-statements"><span class="header-section-number">13.6</span> AS statements</h2>
<p>The <code>AS</code> statment changes the name of a column returned by your query. However, this change is only temporary and is only valid for that particular query. For example, we can rename the <code>Name</code> column to <code>CustomerName</code> and order it alphabetically. This operation is known as <strong>aliasing</strong>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> CustomerID, Name <span class="kw">AS</span> CustomerName</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> Customer</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> Occupation <span class="op">!=</span> <span class="st">'Unemployed'</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> CustomerName</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In Python:</p>
<div id="43991bf8" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>query2 <span class="op">=</span> <span class="st">"""SELECT CustomerID, Name AS CustomerName</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="st">FROM Customer</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="st">WHERE Occupation != 'Unemployed'</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="st">ORDER BY CustomerName"""</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>runQuery(query2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">CustomerID</th>
<th data-quarto-table-cell-role="th">CustomerName</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>900</td>
<td>Aaron Gutierrez</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>622</td>
<td>Aaron Rose</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>226</td>
<td>Adam Ward</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>786</td>
<td>Alan Chambers</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>985</td>
<td>Alan Mitchell</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">755</td>
<td>699</td>
<td>Willie Greene</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">756</td>
<td>715</td>
<td>Yesenia Wright</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">757</td>
<td>952</td>
<td>Yolanda White</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">758</td>
<td>421</td>
<td>Zachary Ruiz</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">759</td>
<td>392</td>
<td>Zachary Wilson</td>
</tr>
</tbody>
</table>

<p>760 rows × 2 columns</p>
</div>
</div>
</div>
</section>
<section id="distinct-statements" class="level2" data-number="13.7">
<h2 data-number="13.7" class="anchored" data-anchor-id="distinct-statements"><span class="header-section-number">13.7</span> DISTINCT statements</h2>
<p>If you only want unique elements from a data table, you’ll need to write the keyword <code>DISTINCT</code> immediately after <code>SELECT</code> in your query.</p>
<p>Example:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> Occupation</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> Customer</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> Occupation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="like" class="level2" data-number="13.8">
<h2 data-number="13.8" class="anchored" data-anchor-id="like"><span class="header-section-number">13.8</span> LIKE</h2>
<p>The <code>LIKE</code> operator in SQL is used to search for a specified pattern in a column. It is often used with the <code>WHERE</code> clause to filter records based on partial matching patterns.</p>
<section id="basic-syntax" class="level3" data-number="13.8.1">
<h3 data-number="13.8.1" class="anchored" data-anchor-id="basic-syntax"><span class="header-section-number">13.8.1</span> Basic Syntax</h3>
<p>The basic syntax for the <code>LIKE</code> operator is:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column1, column2, <span class="op">..</span>.</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> <span class="kw">column</span> <span class="kw">LIKE</span> pattern;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="wildcards" class="level3" data-number="13.8.2">
<h3 data-number="13.8.2" class="anchored" data-anchor-id="wildcards"><span class="header-section-number">13.8.2</span> Wildcards</h3>
<p>The <code>LIKE</code> operator is often used with two wildcards:</p>
<ul>
<li><strong>%</strong>: Represents zero or more characters.</li>
<li>**_**: Represents a single character.</li>
</ul>
</section>
<section id="examples" class="level3" data-number="13.8.3">
<h3 data-number="13.8.3" class="anchored" data-anchor-id="examples"><span class="header-section-number">13.8.3</span> Examples</h3>
<section id="using-the-wildcard" class="level4" data-number="13.8.3.1">
<h4 data-number="13.8.3.1" class="anchored" data-anchor-id="using-the-wildcard"><span class="header-section-number">13.8.3.1</span> Using the % Wildcard</h4>
<p>To find all records where a column (e.g., <code>name</code>) starts with a specific letter (e.g., ‘J’):</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'J%'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This query returns all students whose names start with ‘J’, such as ‘John’, ‘Jane’, ‘Jack’, etc.</p>
<p>To find all records where the column ends with a specific letter (e.g., ‘n’):</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'%n'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This query returns all students whose names end with ‘n’, such as ‘John’, ‘Megan’, etc.</p>
<p>To find all records where the column contains a specific substring (e.g., ‘an’):</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'%an%'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This query returns all students whose names contain ‘an’, such as ‘Megan’, ‘Andrew’, etc.</p>
</section>
<section id="using-the-_-wildcard" class="level4" data-number="13.8.3.2">
<h4 data-number="13.8.3.2" class="anchored" data-anchor-id="using-the-_-wildcard"><span class="header-section-number">13.8.3.2</span> Using the _ Wildcard</h4>
<p>To find all records where a column (e.g., <code>name</code>) has a specific character at a specific position (e.g., second character is ‘a’):</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'_a%'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This query returns all students whose names have ‘a’ as the second character, such as ‘James’, ‘Sarah’, etc.</p>
</section>
<section id="combining-wildcards" class="level4" data-number="13.8.3.3">
<h4 data-number="13.8.3.3" class="anchored" data-anchor-id="combining-wildcards"><span class="header-section-number">13.8.3.3</span> Combining Wildcards</h4>
<p>You can combine <code>%</code> and <code>_</code> to form more complex patterns. For example, to find all names that start with ‘J’, have any two characters, and end with ‘n’:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'J__n'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This query returns names like ‘John’ and ‘Jian’.</p>
</section>
</section>
<section id="case-sensitivity" class="level3" data-number="13.8.4">
<h3 data-number="13.8.4" class="anchored" data-anchor-id="case-sensitivity"><span class="header-section-number">13.8.4</span> Case Sensitivity</h3>
<ul>
<li>In most databases, <code>LIKE</code> is case-insensitive by default (e.g., MySQL).</li>
<li>In some databases (e.g., PostgreSQL), <code>LIKE</code> is case-sensitive. Use <code>ILIKE</code> for case-insensitive matching.</li>
</ul>
</section>
<section id="using-escape-clause" class="level3" data-number="13.8.5">
<h3 data-number="13.8.5" class="anchored" data-anchor-id="using-escape-clause"><span class="header-section-number">13.8.5</span> Using ESCAPE Clause</h3>
<p>If you need to search for characters like <code>%</code> or <code>_</code>, which are normally wildcards, you can use the <code>ESCAPE</code> clause:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span> name <span class="kw">LIKE</span> <span class="st">'%\%%'</span> <span class="kw">ESCAPE</span> <span class="st">'\'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This query finds all names that contain the <code>%</code> character.</p>
</section>
</section>
<section id="case-statements" class="level2" data-number="13.9">
<h2 data-number="13.9" class="anchored" data-anchor-id="case-statements"><span class="header-section-number">13.9</span> CASE statements</h2>
<p>A CASE statement in SQL is used to create conditional logic within your queries. It’s similar to an if-then-else statement in programming languages. You can use CASE to perform different actions based on various conditions.</p>
<section id="basic-syntax-1" class="level3" data-number="13.9.1">
<h3 data-number="13.9.1" class="anchored" data-anchor-id="basic-syntax-1"><span class="header-section-number">13.9.1</span> Basic Syntax</h3>
<p>The basic syntax for a CASE statement in SQL is:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">CASE</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">WHEN</span> condition1 <span class="cf">THEN</span> result1</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">WHEN</span> condition2 <span class="cf">THEN</span> result2</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">..</span>.</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">ELSE</span> resultN</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="cf">END</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="example-usage" class="level3" data-number="13.9.2">
<h3 data-number="13.9.2" class="anchored" data-anchor-id="example-usage"><span class="header-section-number">13.9.2</span> Example Usage</h3>
<p>Here’s an example to illustrate its use:</p>
<p>Suppose you have a <code>students</code> table with columns <code>student_id</code>, <code>name</code>, and <code>score</code>. You want to categorize the students based on their scores into “Pass” or “Fail”.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    student_id,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    name,</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    score,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> score <span class="op">&gt;=</span> <span class="dv">50</span> <span class="cf">THEN</span> <span class="st">'Pass'</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ELSE</span> <span class="st">'Fail'</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">END</span> <span class="kw">AS</span> result</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    students;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example: - The <code>CASE</code> statement checks each student’s score. - If the score is 50 or more, it returns ‘Pass’. - If the score is less than 50, it returns ‘Fail’.</p>
</section>
<section id="nested-case-statements" class="level3" data-number="13.9.3">
<h3 data-number="13.9.3" class="anchored" data-anchor-id="nested-case-statements"><span class="header-section-number">13.9.3</span> Nested CASE Statements</h3>
<p>You can also nest CASE statements for more complex conditions:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    student_id,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    name,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    score,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> score <span class="op">&gt;=</span> <span class="dv">90</span> <span class="cf">THEN</span> <span class="st">'A'</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> score <span class="op">&gt;=</span> <span class="dv">80</span> <span class="cf">THEN</span> <span class="st">'B'</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> score <span class="op">&gt;=</span> <span class="dv">70</span> <span class="cf">THEN</span> <span class="st">'C'</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> score <span class="op">&gt;=</span> <span class="dv">60</span> <span class="cf">THEN</span> <span class="st">'D'</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ELSE</span> <span class="st">'F'</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">END</span> <span class="kw">AS</span> grade</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    students;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In this example: - The <code>CASE</code> statement categorizes scores into letter grades.</p>
</section>
<section id="using-case-in-where-clause" class="level3" data-number="13.9.4">
<h3 data-number="13.9.4" class="anchored" data-anchor-id="using-case-in-where-clause"><span class="header-section-number">13.9.4</span> Using CASE in WHERE Clause</h3>
<p>You can use CASE statements in WHERE clauses, but it’s less common. Here’s an example:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    student_id,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    name,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    score</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    students</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">CASE</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">WHEN</span> score <span class="op">&gt;=</span> <span class="dv">50</span> <span class="cf">THEN</span> <span class="st">'Pass'</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">ELSE</span> <span class="st">'Fail'</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">END</span> <span class="op">=</span> <span class="st">'Pass'</span>;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="join" class="level2" data-number="13.10">
<h2 data-number="13.10" class="anchored" data-anchor-id="join"><span class="header-section-number">13.10</span> JOIN</h2>
<p>In SQL, the <code>JOIN</code> clause is used to combine rows from two or more tables based on a related column between them. There are several types of joins, each serving a different purpose.</p>
<section id="types-of-joins" class="level3" data-number="13.10.1">
<h3 data-number="13.10.1" class="anchored" data-anchor-id="types-of-joins"><span class="header-section-number">13.10.1</span> Types of JOINs</h3>
<ol type="1">
<li><strong>INNER JOIN</strong>: Returns only the rows that have matching values in both tables.</li>
<li><strong>LEFT JOIN (or LEFT OUTER JOIN)</strong>: Returns all rows from the left table, and the matched rows from the right table. The result is NULL from the right side if there is no match.</li>
<li><strong>RIGHT JOIN (or RIGHT OUTER JOIN)</strong>: Returns all rows from the right table, and the matched rows from the left table. The result is NULL from the left side if there is no match.</li>
<li><strong>FULL JOIN (or FULL OUTER JOIN)</strong>: Returns all rows when there is a match in either left or right table. Rows without a match in the other table will have NULLs for the columns from that table.</li>
<li><strong>CROSS JOIN</strong>: Returns the Cartesian product of the two tables, meaning it returns all possible combinations of rows from the tables.</li>
<li><strong>SELF JOIN</strong>: A regular join, but the table is joined with itself.</li>
</ol>
</section>
<section id="examples-1" class="level3" data-number="13.10.2">
<h3 data-number="13.10.2" class="anchored" data-anchor-id="examples-1"><span class="header-section-number">13.10.2</span> Examples</h3>
<section id="inner-join" class="level4" data-number="13.10.2.1">
<h4 data-number="13.10.2.1" class="anchored" data-anchor-id="inner-join"><span class="header-section-number">13.10.2.1</span> INNER JOIN</h4>
<p>This join returns only the rows where there is a match in both tables.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> students.student_id, students.name, scores.score</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> scores <span class="kw">ON</span> students.student_id <span class="op">=</span> scores.student_id;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="left-join" class="level4" data-number="13.10.2.2">
<h4 data-number="13.10.2.2" class="anchored" data-anchor-id="left-join"><span class="header-section-number">13.10.2.2</span> LEFT JOIN</h4>
<p>This join returns all rows from the left table, and the matched rows from the right table. If no match is found, NULLs are returned for columns from the right table.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> students.student_id, students.name, scores.score</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> scores <span class="kw">ON</span> students.student_id <span class="op">=</span> scores.student_id;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="right-join" class="level4" data-number="13.10.2.3">
<h4 data-number="13.10.2.3" class="anchored" data-anchor-id="right-join"><span class="header-section-number">13.10.2.3</span> RIGHT JOIN</h4>
<p>This join returns all rows from the right table, and the matched rows from the left table. If no match is found, NULLs are returned for columns from the left table.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> students.student_id, students.name, scores.score</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">RIGHT</span> <span class="kw">JOIN</span> scores <span class="kw">ON</span> students.student_id <span class="op">=</span> scores.student_id;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="full-join" class="level4" data-number="13.10.2.4">
<h4 data-number="13.10.2.4" class="anchored" data-anchor-id="full-join"><span class="header-section-number">13.10.2.4</span> FULL JOIN</h4>
<p>This join returns all rows when there is a match in either left or right table. Rows without a match in the other table will have NULLs for the columns from that table.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> students.student_id, students.name, scores.score</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FULL</span> <span class="kw">JOIN</span> scores <span class="kw">ON</span> students.student_id <span class="op">=</span> scores.student_id;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="cross-join" class="level4" data-number="13.10.2.5">
<h4 data-number="13.10.2.5" class="anchored" data-anchor-id="cross-join"><span class="header-section-number">13.10.2.5</span> CROSS JOIN</h4>
<p>This join returns the Cartesian product of the two tables, meaning it returns all possible combinations of rows from the tables.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> students.student_id, students.name, scores.score</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="kw">CROSS</span> <span class="kw">JOIN</span> scores;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="self-join" class="level4" data-number="13.10.2.6">
<h4 data-number="13.10.2.6" class="anchored" data-anchor-id="self-join"><span class="header-section-number">13.10.2.6</span> SELF JOIN</h4>
<p>This join is used to join a table with itself, often to compare rows within the same table.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> A.student_id, A.name <span class="kw">AS</span> student_name, B.name <span class="kw">AS</span> buddy_name</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students A</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">INNER</span> <span class="kw">JOIN</span> students B <span class="kw">ON</span> A.buddy_id <span class="op">=</span> B.student_id;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
</section>
<section id="aggregate-functions" class="level2" data-number="13.11">
<h2 data-number="13.11" class="anchored" data-anchor-id="aggregate-functions"><span class="header-section-number">13.11</span> Aggregate functions</h2>
<p>Aggregate functions in SQL perform calculations on a set of values and return a single value. The following are the most commonly used SQL aggregate functions:</p>
<ol type="1">
<li><code>AVG()</code> – calculates the average of a set of values</li>
<li><code>COUNT()</code> – counts rows in a specified table or view</li>
<li><code>MIN()</code> – gets the minimum value in a set of values</li>
<li><code>MAX()</code> – gets the maximum value in a set of values</li>
<li><code>SUM()</code> – calculates the sum of values</li>
</ol>
<p>PostgreSQL as some more advanced <a href="https://www.postgresql.org/docs/9.5/functions-aggregate.html">aggregate functions</a>. Specifically, they have some nice ones for statistics. For example,</p>
<ol type="1">
<li><code>regr_intercept(Y, X)</code> - Returns the intercept for the line of best fit</li>
<li><code>regr_slope(Y, X)</code> - Returns the slope of the line of best fit</li>
<li><code>corr(Y, X)</code> - Returns the correlation between two columns</li>
</ol>
<p>Here are brief explanations of the previously specified aggregate functions:</p>
<section id="avg" class="level3" data-number="13.11.1">
<h3 data-number="13.11.1" class="anchored" data-anchor-id="avg"><span class="header-section-number">13.11.1</span> 1. <code>AVG()</code></h3>
<ul>
<li><strong>Description</strong>: Calculates the average of a set of values.</li>
<li><strong>Example</strong>: To find the average score of students:</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">AVG</span>(score) <span class="kw">AS</span> average_score</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="count" class="level3" data-number="13.11.2">
<h3 data-number="13.11.2" class="anchored" data-anchor-id="count"><span class="header-section-number">13.11.2</span> 2. <code>COUNT()</code></h3>
<ul>
<li><strong>Description</strong>: Counts the number of rows in a specified table or view.</li>
<li><strong>Example</strong>: To count the number of students:</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">COUNT</span>(<span class="op">*</span>) <span class="kw">AS</span> number_of_students</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="min" class="level3" data-number="13.11.3">
<h3 data-number="13.11.3" class="anchored" data-anchor-id="min"><span class="header-section-number">13.11.3</span> 3. <code>MIN()</code></h3>
<ul>
<li><strong>Description</strong>: Gets the minimum value in a set of values.</li>
<li><strong>Example</strong>: To find the minimum score:</li>
</ul>
<div class="sourceCode" id="cb29"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">MIN</span>(score) <span class="kw">AS</span> minimum_score</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="max" class="level3" data-number="13.11.4">
<h3 data-number="13.11.4" class="anchored" data-anchor-id="max"><span class="header-section-number">13.11.4</span> 4. <code>MAX()</code></h3>
<ul>
<li><strong>Description</strong>: Gets the maximum value in a set of values.</li>
<li><strong>Example</strong>: To find the maximum score:</li>
</ul>
<div class="sourceCode" id="cb30"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">MAX</span>(score) <span class="kw">AS</span> maximum_score</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sum" class="level3" data-number="13.11.5">
<h3 data-number="13.11.5" class="anchored" data-anchor-id="sum"><span class="header-section-number">13.11.5</span> 5. <code>SUM()</code></h3>
<ul>
<li><strong>Description</strong>: Calculates the sum of values.</li>
<li><strong>Example</strong>: To find the total score of all students:</li>
</ul>
<div class="sourceCode" id="cb31"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="fu">SUM</span>(score) <span class="kw">AS</span> total_score</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> students;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="sql-statement-types" class="level2" data-number="13.12">
<h2 data-number="13.12" class="anchored" data-anchor-id="sql-statement-types"><span class="header-section-number">13.12</span> SQL statement types</h2>
<p>We have introduced SQL’s <a href="https://en.wikipedia.org/wiki/Data_manipulation_language"><strong>Data Manipulation Language (DML)</strong></a> statements; that is, statements that are used to read or write (manipulate) data from the database. However, SQL also has the ability to create, modify, and remove database objects themselves as well as the data within them. It does this by using <a href="https://en.wikipedia.org/wiki/Data_definition_language"><strong>Data Definition Language (DDL)</strong></a> statements which are commands that define the different structures in a database. You will learn more about these statements in future cases.</p>
<p>There are two other types of SQL statements that are important, but less likely to be used by someone who is merely focused on analyzing data. We’ll not not dig into these as it’s very unlikely that you’ll have to deal with these anytime soon, but you are free to read up about them elsewhere if you are interested. They are:</p>
<ol type="1">
<li><p><a href="https://en.wikipedia.org/wiki/Data_control_language"><strong>Data Control Language (DCL)</strong></a>: These determine who has permission to do what in the database. Everytime you log in to a database, you do that using (your) database user account. By default, a user after being created does not have permission to do anything, so someone (normally a <strong>database administrator (DBA)</strong>) needs to grant permission to that user to perform certain operations on the database.</p></li>
<li><p><a href="https://en.wikipedia.org/wiki/SQL#Transaction_controls"><strong>Transactional Control Language (TCL)</strong></a>: These commands are used to guarantee that full units of work are either completed as a whole or not at all. An example is a bank transfer: you need to ensure that if money has been withdrawn from account A, then it has also been deposited in account B, which requires wrapping these two commands into a transaction.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Case_12.html" class="pagination-link" aria-label="Linear Regression II">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Linear Regression II</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




</body></html>